<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    function add(a, b, c, d){
        console.log('arg', a, b, c, d)
        return a+b+c+d
    }
    function FixedParamsCurryFunction(fn, ...args){
        return function(){
            var params = args.concat([].slice.call(arguments))
            return fn.apply(this, params)
        }
    }

    var bfn = CurryFunction(add)
    /**
     * bfn = function(){
     *  var args = arguments....
     * }
     */
    console.log(bfn(1)(2,3)(4))
    console.log(bfn(1, 2, 3)(4))
    console.log(bfn(1, 2)(3)(4))
    function CurryFunction(fn, len){
        var fnLength = len || fn.length
        return function(){
            var args = arguments
            if(args.length >= fnLength){
                return fn.apply(this, args)
            }else{
                return CurryFunction(FixedParamsCurryFunction(fn, ...args), fnLength - args.length)
            }
        }
    }




    
    function FixedParamsCurryFn(fn, ...args){
        // var args = [].slice.apply(arguments, 0)
        // var fn = args[0]
        var params = args
        return function(){
            var param = params.concat([].slice.call(arguments))
            return fn.apply(this, param)
            
        }
    }
    var afn = FixedParamsCurryFn(add, 2, 6)
    // FixedParamsCurryFn(add)
    // FixedParamsCurryFn(add, 1)
    // FixedParamsCurryFn(add, 1, 2)
    // FixedParamsCurryFn(add, 1, 2, 3)

    function Curry(fn, len){
        let fnParamsLen = len || fn.length
        // let params = [].slice.call(arguments, 1)
        return function(){
            // let args = params.concat([].slice.call(arguments))
            const len = arguments.length
            if( len < fnParamsLen){
                return Curry(FixedParamsCurryFn.call(this, fn, ...arguments), fnParamsLen - len)
            }else{
                return fn.apply(this, arguments)
                
            }
        }
    }
    // var bfn = Curry(add)
    // bfn(1)(2,3)(4)
    // bfn(1, 2, 3)(4)
    // bfn(1, 2)(3)(4)
</script>
</html>